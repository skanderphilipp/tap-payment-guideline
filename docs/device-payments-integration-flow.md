## Preparation   [Skip link to Preparation](https://developers.tap.company/docs/device-payments-integration-flow\#preparation)

Please use CSR file provided by Tap for your Master Test Keys. Upload it to your Apple Pay developer account and provide the CER file back to us. Integrate the Apple Pay button to obtain the Apple Pay payload. Make sure to pass the correct country code for each country.

## Save Apple Pay - with an Authorize Transaction   [Skip link to Save Apple Pay - with an Authorize Transaction](https://developers.tap.company/docs/device-payments-integration-flow\#save-apple-pay---with-an-authorize-transaction)

1. Request for "Create Token for Apple Pay" API to obtain the “Token ID”
2. Create an Authorize Request
01. Pass the “Token ID” in the Source.
02. Pass a small amount (1 SAR, 0.100 KWD, BHD)
03. Apply Auto Void after 1 hour - To auto void the amount
04. Pass 3DS as True - To Authenticate with 3DS
05. Pass Customer Initiated as True
06. Pass Save Card as True - To save the card after a successful card 3DS Authentication and Authorization.
07. Pass the Customer ID - Generated by the customer API in the customer object.
08. Pass the correct MID related to each country.
09. Pass the Redirect URL to redirect back after the 3DS Authentication
10. Pass the Post URL to pass the response after the 3DS Authentication
3. Save the following details from the Authorize Response for future transactions.
1. Authorize ID
2. Authorize Status
3. Card ID
4. Customer ID
5. Payment Agreement ID

## Transactions - with a Save Apple Pay   [Skip link to Transactions - with a Save Apple Pay](https://developers.tap.company/docs/device-payments-integration-flow\#transactions---with-a-save-apple-pay)

Use the same Transaction flow for the Card and by using the Card ID that is linked with the Apple Pay DAN

Updatedover 1 year ago

* * *