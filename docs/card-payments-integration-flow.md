## Preparation   [Skip link to Preparation](https://developers.tap.company/docs/card-payments-integration-flow\#preparation)

Insert the Card Library into your project to collect card details and obtain a “Token ID”

## Save Card - with an Authorize Transaction   [Skip link to Save Card - with an Authorize Transaction](https://developers.tap.company/docs/card-payments-integration-flow\#save-card---with-an-authorize-transaction)

1. Request for the Token ID from the Card Library
2. Create an Authorize Request
01. Pass the “Token ID” in the Source.
02. Pass a small amount (1 SAR, 0.100 KWD, BHD)
03. Apply Auto Void after 1 hour - To auto void the amount
04. Pass 3DS as True - To Authenticate with 3DS
05. Pass Customer Initiated as True
06. Pass Save Card as True - To save the card after a successful card 3DS Authentication and Authorization.
07. Pass the Customer ID - Generated by the customer API in the customer object.
08. Pass the correct MID related to each country.
09. Pass the Redirect URL to redirect back after the 3DS Authentication
10. Pass the Post URL to pass the response after the 3DS Authentication
3. Save the following details from the Authorize Response for future transactions.
1. Authorize ID
2. Authorize Status
3. Card ID
4. Customer ID
5. Payment Agreement ID

## Manage Cards - Saved for your Customers   [Skip link to Manage Cards - Saved for your Customers](https://developers.tap.company/docs/card-payments-integration-flow\#manage-cards---saved-for-your-customers)

Retrieve the List of Cards under the Customer with the List of Card API using the Customer ID.

## Transaction - Charge with a Saved Card   [Skip link to Transaction - Charge with a Saved Card](https://developers.tap.company/docs/card-payments-integration-flow\#transaction---charge-with-a-saved-card)

1. “Create a Token for a Saved Card” using the “Card ID”
1. Pass Card ID
2. Pass Customer ID
2. Step 2 - Create a Charge
01. Pass “Token ID” in the Source
02. Pass the amount to Charge
03. SAR currency is required for Mada
04. Pass 3DS as False
05. Pass Customer Initiated as False
06. Pass Save Card as False
07. Pass Customer ID
08. Pass Payment Agreement ID
09. Pass the correct MID related to each country.
10. No Post URL is Optional but recommended to push the info to your backend. Note - you will receive an immediate response, since no authentication will be needed with a Saved Card linked to a Payment Agreement.
3. Save the following details from the Authorize Response for future transactions.
1. Charge ID
2. Charge Status

## Transaction - Authorize with a Saved Card   [Skip link to Transaction - Authorize with a Saved Card](https://developers.tap.company/docs/card-payments-integration-flow\#transaction---authorize-with-a-saved-card)

1. “Create a Token for a Saved Card” using the “Card ID”
1. Pass Card ID
2. Pass Customer ID
2. Create an Authorize
01. Pass “Token ID” in the Source
02. Pass the amount to Authorize
03. Apply Auto Charge after X Hours (Recommended to apply “X” as your estimated delivery time plus a buffer,
04. in order to void if necessary prior to the estimated delivery time. This will avoid the need to perform a Refund)
05. Pass 3DS as False
06. Pass Customer Initiated as False
07. Pass Save Card as False
08. Pass Customer ID
09. Pass Payment Agreement ID
10. Pass the correct MID related to each country.
11. No Post URL is Optional but recommended to push the info to your backend. Note - you will receive an immediate response, since no authentication will be needed with a Saved Card linked to a Payment Agreement.
3. Step 3 - Save the following details from the Response
1. Authorize ID
2. Authorize Status
4. Step 4 (Only if you want to Void an Authorize) - Create a Void
1. Authorize ID

Updatedover 1 year ago

* * *